<% if @restaurant.approved? != true %>
	<h5> This Restaurant has <span style='color:red'> Not Yet </span> Been Approved by The SafeFARE Staff </h5>
<% end %> 
<%= simple_form_for [current_user,@restaurant] do |f| %>

<div class='wrapper col-md-12' style='clear:both'>
	<div class="col-sm-6 ">
		<div class="row" id='name'>
			<p> Name </p>
			<div class="form"><%= f.input :name, label: false, input_html: { class: "req" }   %></div>	
		</div>
		<div class="row" id='address'>
			<p>Address</p>
			<div class="form"><%= f.input :address, label: false, input_html: { class: "req" }   %></div>
		</div>
		<div class="row" id='city'>
			<p>City</p>
			<div class="form"><%= f.input :city, label: false, input_html: { class: "req" }   %></div>
		</div>
		<div class="row" id='state'>
			<p>State</p>
			<div class="form"><%= f.input :state, collection: @states, include_blank: 'Select...',required: true, label: false, input_html: { class: "chosen-select req" } %></div>
		</div>
		<div class="row" id='zip'>
			<p>Zip</p>
			<div class="form"><%= f.input :zip, label: false, input_html: { class: "req" }   %></div>
		</div>
		<div class="row" id='email'>
			<p>Email</p>
			<div class="form"><%= f.input :email, label: false, input_html: { class: "req" }   %></div>
		</div>
		<div class="row" id='phone'>
			<p>Phone</p>
			<div class="form"><%= f.input :phone, label: false, input_html: { class: "req" }   %></div>
		</div>
		<div class="row" id='hours'>
			<p>Hours</p>
			<div class="form"><%= f.input :hours, label: false, input_html: { class: "req" }   %></div>
		</div>
		<div class="row" id='website'>
			<p>Website</p>
			<div class="form"><%= f.input :website, label: false, input_html: { class: "req" }   %></div>
		</div>
		<div class="row" id='fb_url'>
			<p>Facebook</p>
			<div class="form"><%= f.input :facebook_url, label: false, input_html: { class: "req" }   %></div>
		</div>
		<div class="row" id='tw_url'>
			<p>Twitter</p>
			<div class="form"><%= f.input :twitter_url, label: false, input_html: { class: "req" }   %></div>
		</div>
		<div class="row" id='ae_url'>
			<p>Alergy Eats</p>
			<div class="form"><%= f.input :allergy_eats_url, label: false, input_html: { class: "req" }   %></div>
		</div>
		<div class="row" id='total_employees'>
			<p>Total Employees</p>
			<div class="form"><%= f.input :total_employees, label: false, input_html: { class: "req" }   %></div>
		</div>
		<div class="row" id='percent_aware'>
			<p class='val'><%= @restaurant.percent_aware %></p>
			
		</div>
	</div>
	<div class="col-sm-6">
		<div class="row" id='logo'>
			<div class="image"><%= image_tag @restaurant.logo_url %></div>

			<%= f.file_field :logo, label: false, input_html: { class: "req" }   %>
		
		</div>
		<div class="row" id='visible'>
			<p>Visible:
			<%= f.input :is_visible?, label: false, input_html: { class: "req" }   %>
		</p>
		</div>
		<div class="row" id='description'>
			<p>Description</p>
			<div class="form"><%= f.input :description, label: false, input_html: { class: "req" }   %></div>
		</div>	
		<div class="row" id='cuisine'>
			
			<p> Cuisine: 
			<% @restaurant.cuisines.each do |cuisine| %>
				<% new_id = @restaurant.type_of_cuisines.where(cuisine_id: cuisine.id).first.id %>
				<%= cuisine.name %> 
				<%= link_to "Delete", user_restaurant_type_of_cuisine_path(current_user, @restaurant, new_id ), :method => :delete, :class => 'action' %>
			<% end %></p>
		</div>	
		<div class="row" id='add_new_cuisine'>
			<%= simple_form_for [current_user, @restaurant, @type_of_cuisines] do |h| %>
				<p>Cuisine</p>
				<%= h.input :cuisine_id, collection: @cuisines, multiple: true, value: :id, label: false, input_html: { class: "chosen-select req", multiple: true, style: 'width:255px; height:200px;'} %>
			<% end %>
		</div>

		<div class="row" style='margin-top:20px;'id='employee'>
			<h2> Aware Employees </h2>
		
			<% @restaurant.aware_employees.each_with_index do |employee, index| %>
				<div class="col-sm-4 col-xs-8"> <%= employee.name %></div> 
				<a href='#' style='cursor:pounter;'class="col-sm-4 col-xs-2 edit <%= index %> " id = '<%= employee.id %>'>| edit |</a> 
				<div class="col-sm-4 col-xs-2 "> <%= link_to "Delete", user_restaurant_aware_employee_path(current_user, @restaurant, employee), :method => :delete, :class => 'action' %></div> 
			<% end %> 
		</div>
		<div class="row" style='margin:20px 0px;'  id='edit_employee'>
			<h4> Add Aware Employees </h4>
				<%= f.simple_fields_for :aware_employees do |h| %>
			<div class="edit_form">
				<div class="col-xs-12 ">
					<p>Employee Name</p>
					<%= h.input :name, label: false, input_html: { class: "req" } %>
				</div>
				<div class="col-xs-12 ">
					<p>Employee Verification Code</p>
					<%= h.input :verification, label: false, input_html: { class: "req" } %>
				</div>
			
				<div class="col-xs-12">
					<p>Expiration</p>
					<%= h.input :expiration, label: false %>
				</div>
			</div>
		<% end %>
		</div>
	</div>
	<%= f.button :submit %>
</div>
<% end %>
<script>
$('.edit_form').toggle();
$('.edit_form').each(function(index){
	$(this).addClass(''+index+'');
});
$('.edit').click(function(){
	var index = $(this).attr('class').split(' ')[3];
	$('.edit_form.'+index).fadeToggle();
})
$('.chosen-select').chosen();
$('input, textarea, .select').keyup(function(){ 
	var id = $(this).attr('id');
	if ( validate_element(this) == true ){
		$("#" + id).css('border', '1px solid green');
	}else{
		$("#" + id).css('border', '1px solid red');
	}
});

 
</script>